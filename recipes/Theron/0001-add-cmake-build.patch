From 0a4902377c67a574fec63236c47a82e69eb4d4d8 Mon Sep 17 00:00:00 2001
From: Mingyi <mingyi.z@outlook.com>
Date: Thu, 27 Apr 2017 13:57:53 +0800
Subject: [PATCH] add cmake build

---
 Benchmarks/CMakelists.txt | 15 +++++++++++++++
 CMakelists.txt            | 31 +++++++++++++++++++++++++++++++
 Tests/CMakelists.txt      | 13 +++++++++++++
 Tutorial/CMakelists.txt   | 19 +++++++++++++++++++
 4 files changed, 78 insertions(+)
 create mode 100644 Benchmarks/CMakelists.txt
 create mode 100644 CMakelists.txt
 create mode 100644 Tests/CMakelists.txt
 create mode 100644 Tutorial/CMakelists.txt

diff --git a/Benchmarks/CMakelists.txt b/Benchmarks/CMakelists.txt
new file mode 100644
index 0000000..03b93e3
--- /dev/null
+++ b/Benchmarks/CMakelists.txt
@@ -0,0 +1,15 @@
+cmake_minimum_required(VERSION 3.8)
+project(benchmarks)
+
+set( _list   ParallelThreadRing 
+					PingPong 
+					PrimeFactors 
+					ThreadRing)
+include_directories(Common)
+foreach( i ${_list} )
+    file(GLOB_RECURSE _sources "${i}/*.cpp")
+    add_executable( ${i} ${_sources} )
+	target_link_libraries( ${i} Theron )
+	install(TARGETS ${i} RUNTIME DESTINATION share/Theron/benchmarks )
+
+endforeach()
diff --git a/CMakelists.txt b/CMakelists.txt
new file mode 100644
index 0000000..8c6cd2d
--- /dev/null
+++ b/CMakelists.txt
@@ -0,0 +1,31 @@
+cmake_minimum_required(VERSION 3.8)
+project(Theron VERSION 6.00.02 )
+set(PROJECT_DESCRIPTION "Theron : C++ concurrency library based on the Actor Model")
+
+include(AutoCMake)
+autocmake_pkgconfig_init()
+
+file(GLOB_RECURSE theron_public_HEADERS include/*.h)
+file(GLOB_RECURSE theron_public_SOURCES Theron/*.cpp)
+
+include_directories(include)
+add_library( Theron STATIC ${theron_public_SOURCES} ${theron_public_SOURCES} )
+
+install(TARGETS Theron 
+        ARCHIVE DESTINATION lib
+		LIBRARY DESTINATION lib )
+
+install(DIRECTORY include/Theron DESTINATION include)
+
+
+add_subdirectory( tests )
+add_subdirectory( tutorial )
+add_subdirectory( benchmarks )
+
+autocmake_install_pc(NAME Theron
+					 VERSION 6.00.02
+                     DESCRIPTION "a lightweight C++ concurrency library based on the Actor Model"
+                     REQUIRES 
+					 LIBS Theron )
+
+
diff --git a/Tests/CMakelists.txt b/Tests/CMakelists.txt
new file mode 100644
index 0000000..6eee73d
--- /dev/null
+++ b/Tests/CMakelists.txt
@@ -0,0 +1,13 @@
+cmake_minimum_required(VERSION 3.8)
+project(tests)
+
+file(GLOB_RECURSE tests_private_HEADERS "(TestSuite|TestFramework)/*.h")
+file(GLOB_RECURSE tests_public_SOURCES  Tests.cpp)
+
+add_executable( tests ${tests_private_HEADERS} ${tests_public_SOURCES} )
+
+target_link_libraries( tests Theron )
+add_test( tests  ${CMAKE_CURRENT_BINARY_DIR}/${CMAKE_BUILD_TYPE}/tests  )
+
+set_tests_properties(tests PROPERTIES PASS_REGULAR_EXPRESSION "PASSED" )
+install(TARGETS tests RUNTIME DESTINATION share/Theron/tests )
\ No newline at end of file
diff --git a/Tutorial/CMakelists.txt b/Tutorial/CMakelists.txt
new file mode 100644
index 0000000..9b91d08
--- /dev/null
+++ b/Tutorial/CMakelists.txt
@@ -0,0 +1,19 @@
+cmake_minimum_required(VERSION 3.8)
+project(tutorial)
+
+set( _list  Alignment 
+            Client 
+            CustomAllocators 
+            FileReader
+            HelloWorld
+            MessageRegistration
+            Server
+            UnhandledMessages)
+
+foreach( i ${_list} )
+    file(GLOB_RECURSE _sources "${i}/*.cpp")
+    add_executable( ${i} ${_sources} )
+	target_link_libraries( ${i} Theron )
+	install(TARGETS ${i} RUNTIME DESTINATION share/Theron/tutorial )
+
+endforeach()
-- 
2.13.0.windows.1

